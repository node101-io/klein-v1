include required("/stdlib/electron/electron.conf")

package-json {
  include required("package.json")
}

package-lock-json {
  include required("package-lock.json")
}

app {
  fsname = ${?package-lock-json.name}
  display-name = ${package-json.productName}
  version = ${package-lock-json.version}
  electron.version = ${?package-lock-json.packages.node_modules/electron.version}
  contact-email = ${?package-json.author.email}

  linux {
    desktop-file."Desktop Entry".Exec = ${app.linux.install-path}/${app.fsname}
    symlinks += ${app.linux.prefix}/bin/${app.fsname} -> ${app.linux.install-path}/${app.fsname}
  }

  mac {
    info-plist {
      NSSupportsAutomaticGraphicsSwitching = true
      NSRequiresAquaSystemAppearance = false
      NSHighResolutionCapable = true
      NSQuitAlwaysKeepsWindows = false

      LSEnvironment {
        MallocNanoZone = "0"
      }
      NSAppTransportSecurity {
        NSAllowsArbitraryLoads = true
      }
      NSBluetoothAlwaysUsageDescription = This app needs access to Bluetooth
      NSBluetoothPeripheralUsageDescription = This app needs access to Bluetooth
      NSCameraUsageDescription = This app needs access to the camera
      NSMainNibFile = MainMenu
      NSPrincipalClass = AtomApplication

      LSMinimumSystemVersion = 10.15.0
    }
  }

  windows {
    
  }

  // will change this to github repo url when open sourced
  site.base-url = "localhost:3000"

  inputs += "app/**" -> "app"
  inputs += "resources/**" -> "resources"
  inputs += ".env" -> ".env"
  inputs += "LICENSE" -> "LICENSE"

  // For iteration speed. Remove for release.
  // compression-level = low
}

conveyor.compatibility-level = 13
